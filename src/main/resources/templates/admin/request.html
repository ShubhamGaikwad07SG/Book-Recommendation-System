<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
	<section>
		<div class="container-fluid p-5 mt-5">
			<div class="row">
				<h2>All Book Requests</h2>
				    <table class="table table-bordered">
				        <thead>
				        <tr>
				            <th>User</th>
				            <th>Book</th>
				            <th>Status</th>
				            <th>Request Date</th>
				            <th>Actions</th>
				        </tr>
				        </thead>
				        <tbody>
				        <tr th:each="req : ${requests}">
				         <td th:text="${req.user.email}"></td>  
				            <td th:text="${req.book.title}"></td>
				            <td th:text="${req.status}"></td>
				            <td th:text="${req.requestDate}"></td>
				            <td>
				                <div th:if="${req.status == 'PENDING'}">
									<form th:action="@{'/approve/' + ${req.id}}" method="post" style="display:inline;">
									        <button type="submit" class="btn btn-success btn-sm">Approve</button>
									    </form>
									    <form th:action="@{'/reject/' + ${req.id}}" method="post" style="display:inline;">
									        <button type="submit" class="btn btn-danger btn-sm">Reject</button>
									    </form>
				                </div>
				                <div th:if="${req.status != 'PENDING'}">â€”</div>
				            </td>
				        </tr>
				        </tbody>
				    </table>	
			</div>
		</div>
	</section>
</body>
</html>